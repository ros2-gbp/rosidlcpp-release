# generated from
# rosidl_typesupport_fastrtps_cpp/
#   rosidl_typesupport_fastrtps_cpp-extras.cmake.in

find_package(fastcdr 2 REQUIRED CONFIG)

if(NOT fastcdr_FOUND)
  message(STATUS
    "Could not find eProsima Fast CDR - skip rosidl_typesupport_fastrtps_cpp"
  )
else()
  find_package(ament_cmake_core QUIET REQUIRED)

  if(NOT USE_ROSIDL_GENERATORS)

    # This generator generates code dependent on code generated by rosidl_generator_cpp
    # Find it first so it registers it's extensions first
    find_package(rosidl_generator_cpp REQUIRED)

    # Replace rosidl_typesupport_fastrtps_cpp with rosidlcpp_typesupport_fastrtps_cpp
    find_package(rosidl_typesupport_fastrtps_cpp QUIET)  # Needs to be loaded for its generator can be replace
    list(
      TRANSFORM AMENT_EXTENSIONS_rosidl_generate_idl_interfaces
      REPLACE "rosidl_typesupport_fastrtps_cpp:rosidl_typesupport_fastrtps_cpp_generate_interfaces.cmake"
      "rosidlcpp_typesupport_fastrtps_cpp:rosidlcpp_typesupport_fastrtps_cpp_generate_interfaces.cmake"
    )


    set(rosidlcpp_typesupport_fastrtps_cpp_BIN "${rosidlcpp_typesupport_fastrtps_cpp_DIR}/../../../lib/rosidlcpp_typesupport_fastrtps_cpp/rosidlcpp_typesupport_fastrtps_cpp")
    normalize_path(rosidlcpp_typesupport_fastrtps_cpp_BIN "${rosidlcpp_typesupport_fastrtps_cpp_BIN}")

    set(rosidlcpp_typesupport_fastrtps_cpp_TEMPLATE_DIR "${rosidlcpp_typesupport_fastrtps_cpp_DIR}/../resource")
    normalize_path(rosidlcpp_typesupport_fastrtps_cpp_TEMPLATE_DIR "${rosidlcpp_typesupport_fastrtps_cpp_TEMPLATE_DIR}")
  
  endif()
endif()
