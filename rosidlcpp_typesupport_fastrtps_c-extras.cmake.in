# generated from
# rosidlcpp_typesupport_fastrtps_c/rosidlcpp_typesupport_fastrtps_c-extras.cmake.in

find_package(fastcdr 2 REQUIRED CONFIG)

if(NOT fastcdr_FOUND)
  message(STATUS
    "Could not find eProsima Fast CDR: skipping rosidl_typesupport_fastrtps_c"
  )
else()
  find_package(ament_cmake_core QUIET REQUIRED)

  if(NOT USE_ROSIDL_GENERATORS)

    # This generator generates code dependent on code generated by rosidl_generator_c
    # Find it first so it registers it's extensions first
    find_package(rosidl_generator_c REQUIRED)

    # Replace rosidl_typesupport_fastrtps_c with rosidlcpp_typesupport_fastrtps_c
    find_package(rosidl_typesupport_fastrtps_c QUIET)  # Needs to be loaded for its generator can be replace
    list(
      TRANSFORM AMENT_EXTENSIONS_rosidl_generate_idl_interfaces
      REPLACE "rosidl_typesupport_fastrtps_c:rosidl_typesupport_fastrtps_c_generate_interfaces.cmake"
      "rosidlcpp_typesupport_fastrtps_c:rosidlcpp_typesupport_fastrtps_c_generate_interfaces.cmake"
    )

    set(rosidlcpp_typesupport_fastrtps_c_BIN "${rosidlcpp_typesupport_fastrtps_c_DIR}/../../../lib/rosidlcpp_typesupport_fastrtps_c/rosidlcpp_typesupport_fastrtps_c")
    normalize_path(rosidlcpp_typesupport_fastrtps_c_BIN "${rosidlcpp_typesupport_fastrtps_c_BIN}")

    set(rosidlcpp_typesupport_fastrtps_c_TEMPLATE_DIR "${rosidlcpp_typesupport_fastrtps_c_DIR}/../resource")
    normalize_path(rosidlcpp_typesupport_fastrtps_c_TEMPLATE_DIR "${rosidlcpp_typesupport_fastrtps_c_TEMPLATE_DIR}")
    
  endif()
endif()
